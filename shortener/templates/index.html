{% extends "base.html" %} {% block content %}
<div
  style="text-align: center"
  class="d-flex align-items-center justify-content-center flex-column"
>
  <h1 class="light-text">
    A
    <span class="text-primary" style="font-weight: 700">free</span>
    (as in no limits!) URL shortener.
  </h1>
  <p class="larger-text text-success">
    No account required, and data is not shared.
  </p>
  <p style="margin-bottom: 0" class="text-warning fw-bold">Warning:</p>
  <p class="fst-italic">
    *Website & data is hosted on an Amazon AWS EC2 instance & URLS are
    accessible <br />
    on a MySQL database. Check out the <a href="sourcecode">source code</a> for
    more information.
  </p>
</div>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <!-- Left container for URL shortener input with border -->
      <div id="inputDiv" class="border p-3">
        <p class="larger-text">Original URL:</p>
        <form>
          <label id="enterUrlLabel" for="urlInput">Enter URL:</label>
          <input
            type="text"
            id="urlInput"
            name="urlInput"
            class="form-control"
            placeholder="Paste your URL here"
            autocomplete="off"
          />
          <button class="btn btn-primary mt-2" id="shortenButton">
            Shorten
          </button>
        </form>
        <a id="originalUrl"></a>
      </div>
    </div>

    <div class="col-md-6">
      <!-- Right container for the output div with border -->
      <div class="output-container border p-3">
        <div class="output-div">
          <p class="larger-text">Shortened URL:</p>
          <a id="shortenedUrl" href=""></a>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  style="text-align: center"
  id="loggedInDiv"
  class="d-flex align-items-center justify-content-center flex-column"
>
  {% if urls is not none %}
  <table class="table table-bordered table-hover" id="urlsTable">
    <thead>
      <tr>
        <th>Original</th>
        <th>Shortened</th>
        <th>Action</th>
        <!-- Add a new header for the action column -->
      </tr>
    </thead>
    <tbody>
      {% for url in urls %}
      <tr data-href="https://example.com/user/1">
        <td class="align-middle">{{ url.original }}</td>
        <td class="align-middle">{{ url.shortened }}</td>
        <td class="d-flex justify-content-between">
          <!-- Add the copy & edit button using Font Awesome icons -->
          <div class="btn-group align-middle">
            <button
              class="btn btn-sm btn-primary copy-button rounded-3"
              style="margin-right: 10px"
              data-original="{{ url.original }}"
              data-shortened="{{ url.shortened }}"
            >
              <i class="bi bi-clipboard"></i> Copy
            </button>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-secondary"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu">
              <li>
                <button
                  data-bs-toggle="modal"
                  data-bs-target="#exampleModal"
                  class="dropdown-item btn btn-warning"
                  data-id="{{ url.id }}"
                >
                  <i class="bi bi-pencil-square" style="margin-right: 5px"></i>
                  Edit
                </button>
              </li>
              <li>
                <button
                  class="dropdown-item btn btn-danger"
                  data-bs-toggle="modal"
                  data-bs-target="#deleteModal"
                  data-id="{{ url.id }}"
                  data-shortened="{{ url.shortened }}"
                >
                  <i class="bi bi-trash" style="margin-right: 5px"></i>
                  Delete
                </button>
              </li>
            </ul>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% endif %}
  <!-- Modal -->
  <div
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editUrlLabel">Edit URL</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Cancel"
          ></button>
        </div>
        <div class="modal-body">
          <label for="editUrlInput">URL:</label>
          <input
            type="text"
            id="editUrlInput"
            name="editUrlInput"
            class="form-control"
            placeholder="Paste your URL here"
            autocomplete="off"
          />
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-primary" id="editUrlChangesBtn">
            Save changes
          </button>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="deleteModal"
    tabindex="-1"
    aria-labelledby="deleteModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editUrlLabel">Delete URL</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Cancel"
          ></button>
        </div>
        <div class="modal-body">
          <span id="deleteUrlConf"
            >Are you sure you want to delete the URL with ID (...)</span
          >
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="button" class="btn btn-danger" id="deleteUrlBtn">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="static/index.js"></script>
{% endblock %}
